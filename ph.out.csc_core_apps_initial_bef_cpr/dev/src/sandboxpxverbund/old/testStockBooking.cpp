#include <UnitTest++/UnitTest++.h>
#include "SessionUtil.h"
#include "mess.h"

const basar::VarString queryString_1 = 
	"106;112;129;135;141;158;164;170;187;201;218;224;253;276;282;299;307;342;365;388;394;"
	"402;425;460;483;543;566;572;589;595;626;632;655;715;738;744;767;804;827;916;939;974;"
	"1005;1011;1123;1229;1241;1258;1301;1318;1330;1353;1376;1382;1399;1413;1436;1465;1614;"
	"1643;1732;1790;1815;1821;1844;1910;1962;1979;2068;2134;2140;2157;2163;2192;2306;2312;"
	"2335;2418;2648;2654;2683;2737;2849;3056;3085;3145;3435;3441;3458;3487;3493;3530;3607;"
	"3665;3748;3889;3926;3932;3955;4239;4400;4446;4452;4475;4481;4498;4512;4558;4564;4587;"
	"4618;4624;4630;4647;4676;4682;4699;4713;4736;4831;4860;4877;5032;5061;5291;5316;5322;"
	"5368;5457;5569;5575;5581;5629;5641;5658;5664;5902;5925;6126;6132;6161;6296;6379;6385;"
	"6391;6416;6422;6439;6445;6451;6468;6505;6511;6534;6557;6563;6586;6600;6617;6623;6652;"
	"6669;6675;6681;6735;6741;6758;6801;6936;6942;6959;6965;6994;7114;7255;7278;7350;7396;"
	"7404;7410;7427;7485;7611;7752;7769;7775;7798;7806;7812;7829;7835;7841;7858;7864;7870;"
	"7893;7901;7924;7930;7947;7982;7999;8042;8059;8065;8071;8088;8094;8102;8131;8148;8160;"
	"8177;8562;8585;8875;8912;9082;9099;9248;9254;9260;9308;9343;9366;9426;9432;9455;9900;"
	"9917;9923;9946;9952;9969;9975;10375;10412;10429;10518;10607;10636;10642;10665;10748;"
	"10760;11133;11162;11268;11274;11280;11305;11498;11535;11541;11699;11788;12049;12055;"
	"12061;12084;12090;12144;12150;12167;12210;12368;12374;12492;12807;12813;12836;12842;"
	"12859;12894;12925;12931;12948;12954;13020;13066;13072;13089;13161;13178;13184;13209;"
	"13215;13267;13362;13379;13391;13468;13474;13480;13534;13540;13557;13623;13758;13764;"
	"13787;13936;13959;13971;13988;13994;14002;14019;14025;14031;14048;14054;14060;14077;"
	"14137;14172;14189;14226;14249;14255;14350;14367;14485;14539;14545;14605;14611;14657;"
	"14692;14723;14812;14901;14953;14982;15183;15214;15220;15237;15243;15349;15378;15438;"
	"15450;15496;15504;15533;15579;15585;15591;15616;15705;15740;15792;15817;15823;15869;"
	"15875;15881;15906;15912;15987;16047;16082;16248;16320;16461;16573;16596;16969;16975;"
	"16981;17319;17360;17489;17532;17549;17845;17851;17874;17880;17897;17905;17911;17928;"
	"17934;18106;18135;18141;18164;18253;18313;18342;18359;18419;18431;18454;18508;18566;"
	"18709;18715;19175;19198;19212;19235;19353;19471;19560;19643;19666;19672;19695;19703;"
	"19755;19838;19873;19927;20250;20273;20474;20511;20540;20623;20646;20698;20706;20853;"
	"20899;20988;20994;21002;21025;21031;21048;21083;21108;21143;21232;21367;21539;21551;"
	"21568;21574;21628;21640;21663;21692;21700;21723;21746;21798;21829;21864;21870;21901;"
	"22154;22183;22208;22295;22332;22875;22898;22964;23001;23136;23159;23248;23490;23596;"
	"23739;23863;23900;23917;23923;24012;24070;24093;24101;24118;24124;24176;24199;24207;"
	"24236;24242;24331;24472;24489;24578;24609;24727;24762;24822;24839;24868;25023;25052;"
	"25112;25129;25566;25750;25879;25916;26011;26034;26092;26229;26301;26324;26436;26531;"
	"26672;26703;26726;26838;26850;26873;26896;26910;27140;27157;27430;27602;27619;27849;";
	
const basar::VarString queryString_2 = 
	"27890;27909;27938;27950;28240;28257;28375;28429;28487;28493;28518;28524;28783;28808;"
	"28814;29009;29021;30604;31064;31199;31207;31383;31466;31526;31532;31756;31868;31874;"
	"32046;32098;32106;32112;32129;32164;32224;32276;32282;32454;32520;32537;32566;32572;"
	"32684;32690;32709;32715;32744;32810;32862;32945;32951;32974;33028;33123;33152;33264;"
	"33376;33531;33726;33755;33979;34105;34111;34140;34157;34163;34192;34654;34772;35116;"
	"35211;35659;35671;36340;36357;36363;36452;36469;38505;38563;38586;38600;38617;38623;"
	"38652;38669;38675;38681;38698;38706;38824;38876;38907;38913;38971;38988;38994;39404;"
	"39427;39456;39479;39597;40034;40117;40212;40293;40531;40548;40554;40577;40689;40784;"
	"40821;40956;40985;41022;41051;41163;41312;41358;41424;41447;41499;41772;41944;42010;"
	"42027;42122;42145;42180;42197;42292;42346;42406;42458;42642;42659;42671;42777;42783;"
	"42984;43191;43274;43297;43417;43452;43699;44055;44061;44084;44109;44233;44262;44351;"
	"44500;44977;45043;45066;45072;45089;45095;45103;45126;45132;45149;45155;45824;45847;"
	"45899;46350;46367;46404;46597;46605;46611;46628;46723;46812;47125;47148;47154;47160;"
	"47177;47183;47208;47214;47220;";

// ------------------------------------------------------------------------------------------- //

void testBulkStockQty()
{
    SessionUtil 		session(59);
    pxOrderTransmit*	xmit = session.get();
	pxStockBulkInquiry	bulkInquiry(xmit);
	basar::VarString	resultCommon_1;
	basar::VarString	resultCommon_2;
	basar::VarString	resultCustomer_1;
	basar::VarString	resultCustomer_2;
	basar::Int32		customerNo;
	TimeMeasure			mess_without_customer("without customer");
	TimeMeasure			mess_with_customer("with customer");


for (int i = 0; i < 10; ++i)
{
	customerNo = 9130649;
	mess_with_customer.start();
	bulkInquiry.setBranchAndCustomer(59, customerNo);
	resultCustomer_1 = bulkInquiry.getArticleStock(queryString_1);
	resultCustomer_2 = bulkInquiry.getArticleStock(queryString_2);
	mess_with_customer.stop();


	customerNo = 0;	
	mess_without_customer.start();
	bulkInquiry.setBranchAndCustomer(59, customerNo);
	resultCommon_1 = bulkInquiry.getArticleStock(queryString_1);
	resultCommon_2 = bulkInquiry.getArticleStock(queryString_2);
	mess_without_customer.stop();
}
// 	std::cout << resultCommon_1 << std::endl << std::endl;
// 	std::cout << resultCommon_2 << std::endl << std::endl << std::endl << std::endl;
// 	std::cout << resultCustomer_1 << std::endl << std::endl;
// 	std::cout << resultCustomer_2 << std::endl;
}
